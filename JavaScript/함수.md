# 함수

## 1. 함수란?

- 일련의 과정을 statement로 구현하고 코드블록으로 감싸서 하나의 실행단위로 정의한것

## 2. 함수를 사용하는 이유

- 실행시점을 개발자가 결정할 수 있고 코드의 재사용이 가능함
- 함수를 사용하면 유지보수의 편의성을 높일수 있음

## 3. 함수 리터럴

- 자바스크립트 함수는 객체타입의 값 > 18장에서 자세히 다룸
- 리터럴은 사람이 이해할수있는 문자나 기호를 사용해 값을 생성하는 표기방식
- 함수는 객체지만 일반객체와 다름 > 일반객체는 호출할수없지만 함수는 호출할수있다.

## 4. 함수 정의

- 함수 정의하는 4가지 방식
- 함수는 함수이름을 호출하는 것이 아니라 함수 객체를 가리키는 식별자로 호출
- 자바스크립트에서 함수는 일급객체다. 일급객체는 함수를 값처럼 자유롭게 사용할수있다는 의미 > 변수에 할당할수도 있고, 프로퍼티 값이 될수도 있고 배열의 요소가 될수도있다

```jsx
//1. 함수선언문 
// 함수명 생략불가
function add(x, y){
	return x+y;
}

//2. 함수표현식
// 보통 함수이름을 생략함 (함수명은 함수몸체내부에서만 유효한 식별자이기때문에 외부에서 호출하면 reference에러발생)
var add = function b(x, y){
	return x+y;
}

//3. function 생성자 함수 > 바람직하지 않은 방법
var add = new Function('x','y','return x+y');

// 4. 화살표함수 > 26절에서 살펴봄
// 항상 익명함수로 정의한다.
var add = (x, y) => x+y;
```

- 함수생성시점과 함수 호이스팅
- 호이스팅이란 ? var키워드를 사용한 변수선언문과 함수선언문은 런타임이전에 생성된다. 코드의 선두로 모두 끌어올려서 해당 함수 유효 범위의 최상단에 선언하는 것을 말한다. (함수선언문과 함수표현식으로 정의한 함수의 생성시점이 다름)

```jsx
// 함수참조
console.dir(add); // f add(x, y)
console.dir(sub); // undefined

//함수 호출
console.log(add(2, 5)); // 7
console.log(sub(2, 5)); // TypeError : sub is not a function

//함수선언문
function add(x, y){
	return x+y;
}

//함수표현식
var sub = function(x, y){
	return x-y;
}
```

함수선언문으로 함수를 정의하면 런타임이전에 함수객체가 먼저 생성된다.

함수표현식으로 함수를 정의하면 함수 호이스팅이 발생하는 것이 아니라 변수 호이스팅이 발생한다.

## 5. 함수 호출

- 매개변수와 인수

매개변수의 스코프는 함수내부

자바스크립트 함수는 매개변수의 개수와 인수의 개수가 일치하는지 체크하지 않음

(초과된 인수는 암묵적으로  arguments 객체의 프로퍼티로 보관됨)

자바스크립트는 동적타입언어이기때문에 자바스크립트 함수는 매개변수의 타입을 사전에 지정할수없다.

- 반환문

반환문의 역할

반환문은 함수의 실행을 중단하고 함수몸체를 빠져나간다

return 키워드 뒤에오는 표현식을 평가해 반환한다. return 뒤에 표현식을 명시하지 않거나, return 을 적어주지 않으면 undefined가 반환된다.

반환문은 함수몸체내부에서만 사용할수있고 전역에서 반환문을 사용하면 문법에러 발생(nodejs는 제외)

## 6. 참조에 의한 전달과 외부상태의 변경

- call by value, call by reference

## 7. 다양한 함수의 형태

1. 즉시실행함수

   - 함수정의와 동시에 즉시 호출되는 함수
   - 단 한번만 호출되며 다시 호출할수 없다.
   - IIFE(Immediatly Invoked Function Expression)

   ```jsx
   // 그룹연산자 ()에 피연산자로 함수를 넣어주면 함수객체가 된다.
   var a = (function (){
   	return 3*5;
   }());
   
   console.log(a);
   // 15
   ```

2. 재귀함수

   - 함수가 자기자신을 호출하는 것

3. 중첩함수

   - 함수 내부에 정의된 함수를 중첩함수 또는 내부함수라고 부름
   - 스코프와 클로저랑 관련있음

4. 콜백함수

   - 자바스크립트에서 함수는 일급객체이므로 함수의 매개변수를 통해 함수를 전달할수 있다.
   - 함수의 매개변수를 통해 다른 함수의 내부로 전달되는 함수를 콜백함수라고 하며, 매개변수를 통해 함수의 외부에서 콜백함수를 전달받은 함수를 고차함수라고 한다.

   ```jsx
   function repeat(n, f){
   	for(var i = 0; i < n ;i++){
   		f(i);
   	}
   }
   
   // 이렇게 익명함수 리터럴로 콜백함수를 정의하면서 곧바로 고차함수에 전달하는것이 일반적
   // 콜백함수로 익명함수리터럴을 전달하게 되면 고차함수가 호출될때마다 콜백함수가 생성됨
   repeat(5, function(i) {
   	if(i%2) console.log(i);
   });
   
   // 1 3
   ```

   - 비동기처리에 활용되는 중요한 패턴( promise, async/await도 있음)
   - 콜백함수는 배열 고차함수에서도 사용된다 ( map, filter, reduce...)

5. 순수함수와 비순수함수

   - 순수함수 : 어떤 외부상태에 의존하지 않고 변경하지도 않는, 부수효과가 없는 함수
   - 비순수함수 : 외부상태에 의존하거나 외부상태를 변경하는, 부수효과가 있는 함수
   - 함수형 프로그래밍은 순수함수와 보조함수의 조합을 통해 외부상태를 변경하는 부수효과를 최소화해서 불변성을 지향하는 프로그래밍 패러다임